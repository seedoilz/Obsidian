---
aliases: 
title: PCY Algorithm
date created: 2024-12-07 14:12:00
date modified: 2024-12-18 16:12:25
tags:
  - code/algorithm
---
> A-priori算法的优化版本
## 提出原因
在使用[[A-Priori]]算法的时候，发现大部分的内存空间都是闲置的。
## 流程
### Pass 1 of PCY:
1. **统计单项的支持度**：
	1. 遍历每个篮子（basket），对其中每个单项进行计数，记录它的出现频率。
2. **生成哈希桶**：
	1. 对篮子中的每一对项（pair）使用哈希函数映射到一个桶中，增加该桶的计数。
	2. 这一步的目的是在不生成完整的2项集的情况下，通过哈希桶记录候选2项集的频率。
3. **结果**：
	1. 得到单项的频率表，用于判断哪些单项是频繁项。
	2. 生成哈希桶的计数表，用于判断哪些桶可能包含频繁对。
![CleanShot 2024-12-07 at 14.46.31.png](https://typora-tes.oss-cn-shanghai.aliyuncs.com/picgo/CleanShot%202024-12-07%20at%2014.46.31.png)
### Between Pass 1 and Pass 2
1. **位图表示（Bit-vector representation）**：
	1. 用位图替代哈希桶计数：
	2. 如果一个桶的计数超过最小支持度（s），将该桶标记为频繁桶（对应位图中的1）。否则标记为非频繁桶（对应位图中的0）。
	3. 这种位图方式比存储完整的哈希桶计数节省内存（约为原来的1/32）。
2. **确定频繁单项**：
	1. 根据第一轮的单项频率表，筛选出所有频繁单项，用于生成候选2项集。
### Pass 2 of PCY
1. **生成候选对**：
	1. 对于每个篮子中的项对 {i, j}，检查以下两个条件：
		1. i 和 j 都是频繁单项。
		2. 该对 {i, j} 哈希到的桶是频繁桶（即位图中对应的位置为1）。
	2. 只有满足这两个条件的对才有可能是频繁对。
2. **计算候选对的支持度**：
	1. 对候选对的实际出现次数进行计数。
	2. 筛选出支持度超过最小支持度的频繁2项集。
### Pass 3 of PCY
#### 候选对的三个必要条件
**条件 1**：项对 {i, j} 的每个项 i 和 j 都是频繁单项（在之前已经确定）。
**条件 2**：项对 {i, j} 通过第一个哈希函数映射到的桶，其对应的位图（Bitmap 1）位置为 1（即第一个哈希桶是频繁桶）。
**条件 3**：项对 {i, j} 通过第二个哈希函数映射到的桶，其对应的位图（Bitmap 2）位置为 1（即第二个哈希桶也是频繁桶）。

#### 计数候选项对的支持度
对满足上述三个条件的项对 {i, j} 进行支持度计数。
筛选出支持度大于等于最小支持度（s）的频繁对。
