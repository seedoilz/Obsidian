---
aliases: [Abstract Factory Pattern]
date created: 2023-04-16 16:04:00
date modified: 2024-03-20 11:03:79
title: 抽象工厂模式
tags: [software-design/pattern]
---

## 定义

抽象工厂模式 (Abstract Factory Pattern)：提供一个**创建一系列相关或相互依赖对象的接口**，而无须指定它们具体的类。抽象工厂模式又称为 Kit 模式，属于**对象创建型模式**。

1. **产品等级结构：产品等级结构即产品的继承结构**，如一个抽象类是电视机，其子类有海尔电视机、海信电视机、TCL 电视机，则抽象电视机与具体品牌的电视机之间构成了一个产品等级结构，抽象电视机是父类，而具体品牌的电视机是其子类。
2. **产品族**：在抽象工厂模式中，**产品族是指由同一个工厂生产的，位于不同产品等级结构中的一组产品**，如海尔电器工厂生产的海尔电视机、海尔电冰箱，海尔电视机位于电视机产品等级结构中，海尔电冰箱位于电冰箱产品等级结构中。

抽象工厂模式与工厂方法模式最大的区别在于，**工厂方法模式针对的是一个产品等级结构，而抽象工厂模式则需要面对多个产品等级结构**。

## 结构

1. AbstractFactory：抽象工厂
2. ConcreteFactory：具体工厂
3. AbstractProduct：抽象产品
4. Product：具体产品

## 分析

### 优点
1. 隔离了具体类的生成，改变具体工厂的实例就可以某种程度上改变整个软件系统的行为，实现高内聚低耦合。
2. 当产品族多个对象被设计成一起工作时，能保证客户端只使用同一个产品族中的对象。
3. 增加新的具体工厂和产品族很方便，无须修改已有系统

### 缺点
添加新的产品对象时，难以扩展抽象工厂来生成新种类的产品([[开闭原则]]的倾斜性，增加新的工厂和产品族容易，增加新的产品等级结构麻烦)

### 适用场景
1. 一个系统**不应当依赖于产品类实例如何被创建、组合和表达的细节**，这对于所有类型的工厂模式都是重要的。
2. 系统中有**多于一个的产品族**，而每次只使用其中某一产品族。
3. **属于同一个产品族的产品将在一起使用**，这一约束必须在系统的设计中体现出来。
4. 系统提供一个产品类的库，**所有的产品以同样的接口出现**，从而**使客户端不依赖于具体实现**。

#### 实例
电器工厂：一个电器工厂可以产生多种类型的电器，如海尔工厂可以生产海尔电视机、海尔空调等，TCL 工厂可以生产 TCL 电视机、TCL 空调等，相同品牌的电器构成一个产品族，而相同类型的电器构成了一个产品等级结构，现使用抽象工厂模式模拟该场景。
![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2021-Software-System-Design/img/lec03/12.png)