---
aliases: [Virtual Constructor, Polymorphic Factory, 多态工厂, 虚拟构造器]
date created: 四月 16日 2023, 4:07:16 下午
date modified: 三月 5日 2024, 4:07:11 下午
title: 工厂方法模式
tags: [software-design/pattern]
---

## 定义

工厂方法模式 (Factory Method Pattern)又称为工厂模式，也叫**虚拟构造器 (Virtual Constructor)模式或者多态工厂 (Polymorphic Factory)模式**，它属于**类创建型模式**。

在工厂方法模式中，**工厂父类**负责定义创建产品对象的公共接口，而**工厂子类**则负责生成具体的产品对象，这样做的目的是将产品类的实例化操作延迟到工厂子类中完成，即通过工厂子类来确定究竟应该实例化哪一个具体产品类。

## 结构

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2021-Software-System-Design/img/lec03/6.png)

## 分析

### 优点
1.  用户只需要关心所需产品对应的工厂，无须关注创建细节，甚至无须指导具体产品的类名。
2.  工厂可以自主确定创建何种产品对象，而如何创建这个对象的细节 完全封装在具体工厂内部。
3.  系统中加入新产品时，无须修改抽象工厂和抽象产品提供的接口，无须修改客户端，也无须修改具体工厂和具体产品，只需要添加一个具体工厂和具体产品。

### 缺点
1.  编写新的具体产品类时，还需要提供与之对应的具体工厂类，导致类个数成对增加，增加系统的复杂度和编译开销
2.  抽象层引入增加了系统的抽象 性和理解难度，且实现中会使 用到 DOM 和反射等技术，实现难度大

### 适用场景
1.  一个类不知道它所需的对象的类(只需要知道对应工厂)
2.  一个类通过其子类来指定创建 哪个对象(结合多态性和里氏代 换原则)
3.  将创建对象的任务委托给多个 工厂子类中的某一个，客户端 使用时可以无须关心是哪一个 工厂子类创建产品子类，需要 时再动态指定(可以用配置文 件)

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2021-Software-System-Design/img/lec03/5.png)

