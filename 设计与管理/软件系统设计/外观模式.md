---
aliases: [Facade Pattern]
date created: 四月 17日 2023, 5:33:21 下午
date modified: 三月 5日 2024, 4:07:11 下午
title: 外观模式
tags: [software-design/pattern]
---

## 定义
外观模式 (Facade Pattern)：外部与一个子系统的通信必须通过一个**统一的外观对象**进行，为子系统中的一组接口**提供一个一致的界面**，外观模式定义了一个高层接口，这个接口**使得这一子系统更加容易使用**。外观模式又称为**门面模式**，它是一种**对象结构型模式**。

## 结构
1. Facade: 外观角色
2. SubSystem: 子系统角色
![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2021-Software-System-Design/img/lec09/2.png)

## 分析
符合[[单一职责原则]]: 引入外观对象，为子系统的访问提供一个简单而统一的接口，让子系统的通信和互相依赖关系达到最小。
符合[[迪米特法则]]: 引入外观对象降低原系统的复杂性，降低客户类与子系统类的耦合度。
违反[[开闭原则]]: 没有引入抽象外观类时新增子系统需要修改外观类和客户端源代码。

### 优点
1. 对客户屏蔽子系统组件，减少客户处理的对象数目使得子系统使用起来更加容易。
2. 实现了子系统与客户之间的松耦合关系，使得子系统组件变化不影响客户类
3. 降低大型软件系统中的编译依赖性，并简化了系统在不同平台之间的移植过程 (编译一个子系统不需要编译所有其他的子系统)
4. 只是提供了一个访问子系统的统一入口，并不影响用户直接使用子系统类。

### 缺点
1. 不能很好地限制客户使用子系统类 (过多限制降低可变性和灵活性)
2. 在不引入抽象外观类的情况下，增加新的子系统需要修改外观类和客户端代码，违反开闭原则。

### 适用场景
1. 当要为一个复杂子系统提供一个简单接口时可以使用外观模式。
2. 客户程序与多个子系统之间存在很大的依赖性 (外观类可以将子系统与客户以及其他子系统解耦)
3. 在层次化结构中，可以用外观模式定义系统中每一层的入口，层与层之间不直接产生联系，而通过外观类建立联系，降低层之间的耦合度。

#### 实例
现在考察一个电源总开关的例子，以便进一步说明外观模式。为了使用方便，一个电源总开关可以控制四盏灯、一个风扇、一台空调和一台电视机的启动和关闭。通过该电源总开关可以同时控制上述所有电器设备，使用外观模式设计该系统。
![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2021-Software-System-Design/img/lec09/3.png)

某系统需要提供一个文件加密模块，加密流程包括三个操作，分别是读取源文件、加密、保存加密之后的文件。读取文件和保存文件使用流来实现，这三个操作相对独立，其业务代码封装在三个不同的类中。现在需要提供一个统一的加密外观类，用户可以直接使用该加密外观类完成文件的读取、加密和保存三个操作，而不需要与每一个类进行交互，使用外观模式设计该加密模块。
![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2021-Software-System-Design/img/lec09/4.png)